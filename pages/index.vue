<!-- <template>
  <div class="container mt-4">
    <h1 class="text-primary">Káº¿t Quáº£ Xá»• Sá»‘</h1>
    <form @submit.prevent="addLotteryResult" class="mb-3">
      <div class="input-group mb-2">
        <input v-model="newLottery.date" type="date" class="form-control" required />
        <input v-model="newLottery.numbers" placeholder="Nháº­p sá»‘, cÃ¡ch nhau báº±ng dáº¥u pháº©y" class="form-control" required />
        <button type="submit" class="btn btn-success">ThÃªm Káº¿t Quáº£</button>
      </div>
    </form>

    <ul class="list-group">
      <li v-for="result in lotteryResults" :key="result._id" class="list-group-item d-flex justify-content-between align-items-center">
        <span v-if="!editingLottery[result._id]">{{ result.date }} - {{ formattedNumbers(result.numbers) }}</span>
        <span v-else class="d-flex gap-2">
          <input v-model="editLotteryData.date" type="date" class="form-control" />
          <input v-model="editLotteryData.numbers" placeholder="Nháº­p sá»‘, cÃ¡ch nhau báº±ng dáº¥u pháº©y" class="form-control" />
        </span>
        <div>
          <button v-if="!editingLottery[result._id]" @click="startEditLottery(result)" class="btn btn-warning btn-sm">Sá»­a</button>
          <button v-if="editingLottery[result._id]" @click="handleUpdateLotteryResult(result._id)" class="btn btn-success btn-sm">LÆ°u</button>
          <button @click="deleteLotteryResult(result._id)" class="btn btn-danger btn-sm">XÃ³a</button>
        </div>
      </li>
    </ul>
  </div>
</template>

<script setup>

import { ref, onMounted, reactive } from 'vue';
import { fetchLotteryResults, createLotteryResult, updateLotteryResult, deleteLotteryResult } from '@/services/api';


const lotteryResults = ref([]);
const newLottery = ref({ date: '', numbers: '' });
const editingLottery = reactive({});
const editLotteryData = ref({ date: '', numbers: '' });

const formattedNumbers = (numbers) => (Array.isArray(numbers) ? numbers.join(', ') : numbers);

const loadData = async () => {
  try {
    lotteryResults.value = await fetchLotteryResults();
  } catch (error) {
    console.error("Lá»—i táº£i dá»¯ liá»‡u:", error);
  }
};

onMounted(loadData);

const addLotteryResult = async () => {
  try {
    await createLotteryResult({
      date: newLottery.value.date,
      numbers: newLottery.value.numbers.split(',').map(num => num.trim()),
    });
    newLottery.value = { date: '', numbers: '' };
    await loadData();
  } catch (error) {
    console.error("Lá»—i thÃªm:", error);
  }
};

const startEditLottery = (result) => {
  editingLottery[result._id] = true;
  editLotteryData.value = { date: result.date, numbers: formattedNumbers(result.numbers) };
};

const handleUpdateLotteryResult = async (id) => {
  try {
    await updateLotteryResult(id, {
      date: editLotteryData.value.date,
      numbers: editLotteryData.value.numbers.split(',').map(num => num.trim()),
    });
    editingLottery[id] = false;
    await loadData();
  } catch (error) {
    console.error("Lá»—i cáº­p nháº­t:", error);
  }
};

const handleDeleteLotteryResult = async (id) => {
  if (!confirm("Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a?")) return;
  await deleteLotteryResult(id);
};

</script> -->
<template>
  <div>
    <BannerAds />
    <div class="alert alert-info text-center fw-bold fs-4 py-3">
  ğŸ¯ Soi Cáº§u - Diá»…n Ä‘Ã n soi cáº§u lá»›n nháº¥t Viá»‡t Nam ğŸ¯
</div>

<div class="card p-3 shadow-sm">
  <h5 class="text-danger fw-bold">DIá»„N ÄÃ€N Xá»” Sá» XSMB - THáº¢O LUáº¬N CHÃ‰M GIÃ“ Dá»° ÄOÃN Xá»” Sá» 3 MIá»€N</h5>
  <p class="text-success fw-semibold">(Äang Hoáº¡t Äá»™ng)</p>
  <p class="text-dark">
    <strong>ThÃ´ng BÃ¡o:</strong> lÆ°á»›t xuá»‘ng pháº§n bÃ¬nh luáº­n Ä‘á»ƒ cÃ¹ng vÃ o diá»…n Ä‘Ã n chÃ©m giÃ³ lÃ´ Ä‘á» cÃ¹ng má»i ngÆ°á»i hoÃ n toÃ n 
    <span class="text-danger fw-bold">miá»…n phÃ­</span>. ChÃºc cÃ¡c báº¡n may máº¯n phÃ¡t tÃ i! ğŸ‰
  </p>
</div>

    <LotteryResults />
    <div class="card p-3 shadow-sm border-0">
  <h4 class="text-danger fw-bold text-center">ğŸ”¥ ADM chá»‘t sá»‘ hÃ´m nay ğŸ”¥</h4>
  <h6 class="text-primary text-center">
    Dá»° ÄOÃN Káº¾T QUáº¢ Xá»” Sá» MIá»€N Báº®C HÃ”M NAY  
    <br /> <small class="text-muted">(08:00:00 - 17:00:00)</small>
  </h6>
  
  <ul class="list-group mt-3">
    <li class="list-group-item d-flex justify-content-between">
      <span>ğŸ¯ <strong>Giáº£i Ä‘áº·c biá»‡t cháº¡m:</strong></span> 
      <span class="text-success fw-bold">3 - 6 - 7 ğŸ’°</span>
    </li>
    <li class="list-group-item d-flex justify-content-between">
      <span>ğŸ¯ <strong>Báº¡ch thá»§ lÃ´:</strong></span> 
      <span class="text-success fw-bold">43 ğŸ’°</span>
    </li>
    <li class="list-group-item d-flex justify-content-between">
      <span>ğŸ¯ <strong>Song thá»§ lÃ´:</strong></span> 
      <span class="text-success fw-bold">35 - 72 ğŸ’°</span>
    </li>
    <li class="list-group-item d-flex justify-content-between">
      <span>ğŸ¯ <strong>LÃ´ xiÃªn:</strong></span> 
      <span class="text-success fw-bold">12 - 21 ğŸ’°</span>
    </li>
    <li class="list-group-item d-flex justify-content-between">
      <span>ğŸ¯ <strong>DÃ n Ä‘á» 10 sá»‘:</strong></span> 
      <span class="text-success fw-bold">542 - 398 - 168 - 437 - 276 ğŸ’°</span>
    </li>
  </ul>
  <div>
    <topchotso/>
  </div>
</div>
    <Comments /> 
  </div>
  
</template>

<script setup>
import BannerAds from '@/components/BannerAds.vue';
import LotteryResults from '@/components/LotteryResults.vue';
import Comments from '@/components/Comments.vue';
import topchotso from '@/components/topchotso.vue';


</script>

